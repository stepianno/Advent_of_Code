#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed Dec 22 22:01:55 2021

@author: stepianno
"""
import numpy as np
with open('pixels.txt') as f:
    content = f.read()
line, pix = content.split('\n\n')
# line = '''..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..##
# #..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###
# .######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#.
# .#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#.....
# .#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#..
# ...####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.....
# ..##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#'''.replace('\n', '')
# pix = '''...............
# ...............
# ...............
# ...............
# ...............
# .....#..#......
# .....#.........
# .....##..#.....
# .......#.......
# .......###.....
# ...............
# ...............
# ...............
# ...............
# ...............'''
line = line.strip().replace('#', '1').replace('.', '0')
pix = [[int(x) for x in line.strip().replace('#', '1').replace('.', '0')] for line in pix.splitlines()]
pix = np.pad(np.array(pix), ((100,100),(100,100)), 'minimum')
ins = [
       (-1,-1),
       (-1,0),
       (-1,1),
       (0,-1),
       (0,0),
       (0,1),
       (1,-1),
       (1,0),
       (1,1)
       ]
for _ in range(50):
    if _==2:
        print('part a:', np.sum(pix))
    old_pix = pix.copy()
    for j in range(len(pix)):
        for i in range(len(pix[0])):
            bit = ''
            for y, x in ins:
                bit += str(old_pix[min(max(j+y, 0), len(pix)-1), min(max(i+x, 0), len(pix)-1)])
            bit = int(bit, 2)
            pix[j,i] = int(line[bit])
print('part b:', np.sum(pix))